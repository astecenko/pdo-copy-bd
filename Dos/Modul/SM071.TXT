
                   О П И С А Н И Е   М О Д У Л Я  SM071

        Модуль приведения единиц измерения SM071()
     предназначен для перевода данных;
        1. Из исходной единицы измерения в основную
        2. Из основной единицы измерения в заданную
        3. Из основной в заданную с приоритетом

         SM071 (<@Бу>,<Еи0>,<Поле0>,<@Поле1>,[@Имя],<@Еи1>,<Шаблон>)

                  Аргументы:

        Бу - Параметр, задающий адрес байта-указателя. Байт-указатель должен
                содержать два символа.
               Символы могут принимать значения:
           Первый: 0 - перевод нормы;
                   8 - перевод цены.
           Второй: 0 - из исходной в основную;
                   2 - из основной в заданную;
                   4 - проверка на допустимость;
                   8 - из основной в заданную с приоритетом
        Еи0    -  Код единицы измерения, которую необходимо преобразовать
                          - (2 символа)
        Поле0  -  Поле исходных данных (число);
        Поле1  -  Параметр, задающий адрес поля результата (число) ;
        Имя    -  Параметр, задающий адрес строки для наименования
                  исходной /заданной, приведенной/ и основной единицы
                  измерения;
        Еи1    -  Параметр, содержащий адрес кода заданной единицы
                  измерения ;
        Шаблон  - Поле значности результата при переводе с приоритетом,
                  содержащее число целых и число дробных знаков поля
                  результата  в символьной форме /например: '99999.99'/

             Результат:

        В результате работы модуля SM071 вызывающему модулю

           1. В <@Поле1> передается числовой результат, приведенный в
              соответствии с установленным байтом-указателем - ;
           2. В  <@Имя> передается строка длиной 10 символов, содержащая
              наименование исходной /заданной,приведенной/ единицы измерения
              - первые 5 символов и наименование основной единицы измерения
              - вторые 5 символов;
           3. В <@Еи1> передается код приведенной единицы измерения - два
              символа.
        Логически модуль SM071 возвращает .T. при успешной работе модуля.
        При отсутствии исходной /заданной/ единицы измерения или при потере
     старших разрядов при переводе с приоритетом модуль SM071 возвращает .F.
        При переводе с приоритетом при потере младших разрядов второй символ
     байта-указателя принимает значение '9'

  П Р И М Е Р:

LOCAL pnorma, pei,bu,soob:=''
USE MD81
...
bu:='00'    //перевод нормы из исходной в основную
IF !SM071( @bu, md81->ei, md81->norma, @pnorma,, @pei )
   soob := 'Ошибка в приведении нормы '
ENDIF
IF !empty(soob)
  ? soob
ELSE
  ? pnorma
  ? pei
ENDIF
...
